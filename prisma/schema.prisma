generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        String    @id @default(cuid())
  email     String    @unique
  password  String
  name      String?
  vehicles  Vehicle[]
  createdAt DateTime  @default(now())
}

model Vehicle {
  id              String      @id @default(cuid())
  name            String
  make            String?
  model           String?
  year            Int?
  initialOdometer Float       @default(0)

  // Purchase & Initial Costs
  purchasePrice       Float?
  purchaseDate        DateTime?
  registrationCost    Float?
  otherInitialCosts   Float?

  // Recurring Annual Costs
  insuranceCostYearly Float?
  roadTaxYearly       Float?
  depreciationYearly  Float?

  // Financing
  financingMonthlyPayment Float?
  financingInterestRate   Float?
  financingStartDate      DateTime?
  financingEndDate        DateTime?
  financingTotalAmount    Float?

  userId          String
  user            User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  fuelEntries     FuelEntry[]
  maintenanceEntries MaintenanceEntry[]
  createdAt       DateTime    @default(now())
}

model FuelEntry {
  id            String   @id @default(cuid())
  date          DateTime
  odometer      Float
  fuelAmount    Float
  cost          Float
  fullTank      Boolean  @default(true)
  notes         String?
  gasStation    String?
  tripDistance  Float?
  pricePerLiter Float?
  tyres         String?
  vehicleId     String
  vehicle       Vehicle  @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  createdAt     DateTime @default(now())
}

model MaintenanceEntry {
  id              String   @id @default(cuid())
  date            DateTime
  odometer        Float?
  description     String
  cost            Float
  category        String   // service, repair, tires, brakes, oil, inspection, bodywork, other
  invoiceNumber   String?
  serviceProvider String?
  notes           String?
  vehicleId       String
  vehicle         Vehicle  @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  createdAt       DateTime @default(now())
}
